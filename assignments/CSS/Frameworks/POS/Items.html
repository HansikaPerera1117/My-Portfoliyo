<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Framework POS System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="assests/css/bootstrap.min.css" rel="stylesheet">

    <!------------------------stylesheets--------------------------------->
    <link rel="stylesheet" href="assests/styles/navbar.css">

    <!---------------------------font links------------------------------------>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Saira:wght@600&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu&display=swap" rel="stylesheet">
</head>

<body>
<header>
    <!-----------------------nav bar start--------------------------------------------->
    <nav class="myNav">
        <div class="container-fluid">

            <!---------------------------menu button start---------------------------------->
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasExample" aria-controls="offcanvasExample">
                <img src="assests/Images/menu.png" alt="menu icone" width="40" height="40" class="d-inline-block align-text-top">
            </button>

            <div  class=" myf offcanvas offcanvas-start " tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel" >
                <div class="menu" >
                    <a href="index.html"> <img src="assests/Images/home.png" alt="home icon" height="60" width="60"></a>
                    <p>Home</p>
                </div>
                <div class="menu">
                    <a href="PlaceOrders.html"><img src="assests/Images/order.png" alt="Order icon" height="60" width="60"></a>
                    <p>Orders</p>
                </div>
                <div class="menu">
                    <a href="Customers.html"><img src="assests/Images/customer.png" alt="Customer icon" height="60" width="60"></a>
                    <p>Customers</p>
                </div>
                <div class="menu">
                    <a href="Items.html"> <img src="assests/Images/items.png" alt="item icon" height="60" width="60"></a>
                    <p>Items</p>
                </div>

                <div class="menu1">
                    <img src="assests/Images/signin.png" alt="signup icon" height="25" width="25">
                    <a>Sign Up</a>
                    <img src="assests/Images/logout.png" alt="logout icon" height="25" width="25">
                    <a>LogOut</a>
                </div>

            </div>
            <!---------------------------menu button end---------------------------------->

            <img src="assests/Images/logo.png" alt="Logo" width="83" height="90" class="logo d-inline-block align-text-top">
            <p class="name">Royal Grocery</p>


            <div class="dateTime">
                <p>Date : 0000-00-00 Time : 0000:00:00</p>
            </div>
            <div class="nav">
                <img src="assests/Images/signin.png" alt="signup icon" height="25" width="25">
                <a>Sign Up</a>
                <img src="assests/Images/logout.png" alt="logout icon" height="25" width="25">
                <a>LogOut</a>
            </div>
        </div>
    </nav>
    <!-----------------------nav bar end--------------------------------------------->
</header>

<main class="container-fluid">
    <!----------------------main bg start------------------------------------->
    <div class="m-2">
        <img src="assests/Images/items.png" alt="Item icon" width="40" height="40" class="d-inline-block align-text-top">
        <span id="label">Items</span>
    </div>
    <div class="row mx-auto " id="mainBg" >
        <div class="col-12" id="navbar">
            <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="Home.html" id="home">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Items</li>
                </ol>
            </nav>
        </div>

        <div class="col-8 " style="height: 240px">
            <div class="container text-center">
                <div class="row ms-1 me-1">
                    <form class="col" id="searchBox">
                        <div class="row">
                            <div class="col text-start" id="searchBoxHeading">
                                <span  id="search">Search Items</span>
                            </div>
                            <div class="row align-items-center" style="height: 85px">
                                <div class="col-9">
                                    <input class="form-control"  id="searchBar" placeholder="Input Item Code / Name Here" style="height: 53px">
                                </div>
                                <div class="col-3" >
                                    <select id="cmbNames" class="form-select" aria-label="Default select example" style="height: 53px">
                                        <option selected>Item Names</option>
                                    </select>
                                </div>
                            </div>

                            <div class="row align-items-center" style="height: 70px">
                                <div class="col text-start" >
                                    <button type="button" class="btn" id="searchButton" data-bs-target="#ItemDetailsModal" data-bs-toggle="modal">Search</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-4" style="height: 240px">
            <div class="row me-1 " style="height: 80px">
                <div class="col"></div>
                <div class="col align-self-end">
                    <button type="button" class="btn btn-primary text-black" id="newCustomer" data-bs-target="#newItemModal" data-bs-toggle="modal" type="button">New Item</button>

                    <!---------------------New Item Modal start----------------->
                    <div aria-hidden="true" aria-labelledby="newItemModalLabel" class="modal fade" id="newItemModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="newItemModalLabel">New Item</h5>
                                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                                </div>
                                <div class="modal-body">
                                    <form id="newItemForm">
                                        <div class="mb-3">
                                            <span style="font-size: 20px" id="Code"><strong>Item Code : <label class="form-label" for="Code" id="ItemCode">P001</label></strong></span>
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="inputItemName">Item Name</label>
                                            <input class="form-control" id="inputItemName" type="text" placeholder="Keerisamba 5Kg">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="inputItemPackSize">Pack Size</label>
                                            <input class="form-control" id="inputItemPackSize" multiple type="text" placeholder="Kg/g/l/ml...">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="inputItemPrice">Price</label>
                                            <input class="form-control" id="inputItemPrice" type="number" placeholder="0000.00">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label" for="inputItemQuantity">Quantity</label>
                                            <input class="form-control " id="inputItemQuantity" type="number" placeholder="0000">
                                        </div>
                                        <div class="row justify-content-end">
                                            <div class="col-7 me-0">
                                                <button class="btn text-white ms-3 " style="background-color: rgb(227,133,133)" type="button" id="btnSaveItem">Save Item</button>
                                                <button class="btn btn-primary" type="reset" form="newItemForm">Renew</button>
                                                <button class="btn btn-secondary " data-bs-dismiss="modal" type="button">Close</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!---------------------New Item Modal end----------------->

                </div>
            </div>
            <div class="row me-1" style="height: 80px">
                <div class="col"></div>
                <div class="col text-start align-self-end" >
                    <button type="button" class="btn btn-warning" id="viewAll" data-bs-target="#ViewAllItemsModal" data-bs-toggle="modal" type="button" >View All Items</button>

                    <!---------------------View all Customer Modal start----------------->
                    <div aria-hidden="true" aria-labelledby="ViewAllItemsModalLabel" class="modal fade" id="ViewAllItemsModal" tabindex="-1">
                        <div class="modal-dialog" style="--bs-modal-width: 1250px">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="ViewAllItemsModalLabel">List of All Items</h5>
                                    <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                                </div>
                                <div class="modal-body">
                                    <section>
                                        <table class="table table-bordered table-hover mt-2">
                                            <thead class="text-black" style=" background-color:  rgba(255, 204, 204, 1)">
                                            <tr>
                                                <th>Item Code</th>
                                                <th>Item Name</th>
                                                <th>Pack Size</th>
                                                <th>Price</th>
                                                <th>Quantity</th>
                                            </tr>
                                            </thead>
                                            <tbody class="tblItems">

                                            </tbody>
                                        </table>
                                        <div class="row justify-content-end">
                                            <div class="col-1 me-0">
                                                <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Close</button>
                                            </div>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--------------------View all Customer Modal end----------------->


                </div>
            </div>
        </div>

        <div class="col-12" style="height: 80px">
            <div class="btn-group mt-2 ms-5" role="group" aria-label="Basic mixed styles example" style="height: 55px">
                <button type="button" class="btn btn-danger" style="width: 90px">Delete</button>
                <button type="button" class="btn btn-primary" style="width: 90px" data-bs-target="#ItemDetailsModal" data-bs-toggle="modal" type="button">Details</button>

                <!--------------------- Item Details Modal start----------------->
                <div aria-hidden="true" aria-labelledby="ItemDetailsModalLabel" class="modal fade" id="ItemDetailsModal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="ItemDetailsModalLabel"  style="font-size: 20px"><strong>Item Code : <label class="form-label" id="ICode">P001</label></strong></h5>
                                <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                            </div>
                            <div class="modal-body">
                                <section>
                                    <div class="mb-3">
                                        <label class="form-label" for="inputIName">Item Name</label>
                                        <input class="form-control" id="inputIName" type="text">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" for="inputIPacketSize">Pack Size</label>
                                        <input class="form-control" id="inputIPacketSize" multiple type="text">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" for="inputIPrice">Price</label>
                                        <input class="form-control" id="inputIPrice" type="number">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label" for="inputIQuantity">Quantity</label>
                                        <input class="form-control " id="inputIQuantity" type="number">
                                    </div>
                                    <div class="row justify-content-end">
                                        <div class="col-7 ">
                                            <button class="btn btn-warning text-white ms-2" type="button">Update Item</button>
                                            <button class="btn btn-primary" type="button">Reset</button>
                                            <button class="btn btn-secondary " data-bs-dismiss="modal" type="button">Close</button>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>
                </div>
                <!---------------------Item Details Modal end----------------->



                <button type="reset" form="searchBox" class="btn btn-success" style="width: 70px">Clear</button>
            </div>
        </div>

        <div class="col-12" style="height:210px">

            <table class="table table-bordered table-hover mt-2">
                <thead class="text-black" style=" background-color:  rgba(255, 204, 204, 1)">
                <tr>
                    <th>Item Code</th>
                    <th>Item Name</th>
                    <th>Pack Size</th>
                    <th>Price</th>
                    <th>Quantity</th>
                </tr>
                </thead>
                <tbody class="tblItems">

                </tbody>
            </table>
        </div>
    </div>
    <!----------------------main bg end------------------------------------->
</main>

<script src="assests/js/bootstrap.min.js"></script>
<script src="assests/JQuery/jquery-3.6.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.37/dist/sweetalert2.all.min.js"></script>

<script>

    var items=[];

    $("#btnSaveItem").click(function (){
        let itemCode = $("#ItemCode").text();
        let itemName = $("#inputItemName").val();
        let packSize = $("#inputItemPackSize").val();
        let price = $("#inputItemPrice").val();
        let quantity = $("#inputItemQuantity").val();


        var itemObject = {
            code: itemCode,
            name: itemName,
            packSize: packSize,
            price: price,
            qty: quantity,
        }

        let afterCount = items.length;
        console.log(afterCount);
        let beforCount = afterCount+1;
        console.log(beforCount);

        items.push(itemObject);

        if (beforCount == items.length){
            Swal.fire({
                position: 'top-end',
                icon: 'success',
                title: 'Item has been saved successfully...',
                showConfirmButton: false,
                timer: 1500
            })
        }else{
            Swal.fire({
                position: 'top-end',
                icon: 'error',
                title: 'Unsuccessful...',
                showConfirmButton: false,
                timer: 1500
            })
        }

        console.log(items);

        loadAllItems();

        loadItemNames();

        bindRowClickEvents();

    });

    function loadAllItems(){
        $(".tblItems").empty();

        for(var item of items){
            var row= `<tr> <td>${item.code}</td><td>${item.name}</td><td>${item.packSize}</td><td>${item.price}</td><td>${item.qty}</td></tr>`;

            $(".tblItems").append(row);
        }
    }

    function bindRowClickEvents() {
        $(".tblItems>tr").click(function () {
            let id = $(this).children(":eq(0)").text();
            $("#searchBar").val(id);
        });
    }

    function loadItemNames(){
        $("#cmbNames").empty();
        var selected = `<option selected>Item Names</option>`;
        $("#cmbNames").append(selected);

        for (var item of items){
            // console.log(item);

            var names =  `<option>${item.name}</option>`;

            // console.log(names);

            $("#cmbNames").append(names);
        }
    }

    $("#cmbNames").click(function () {
        let name = $('#cmbNames>option:selected').val();

        for (let i = 0; i < items.length; i++) {
            let itemName = items[i].name;

            if (itemName == name){
                $("#searchBar").val(name);
            }

        }

    })


    $("#viewAll").click(function (){
        loadAllItems();
    });


    $("#searchButton").click(function (){

        let search = $("#searchBar").val();

        for (let i = 0; i < items.length; i++) {
            let code = items[i].code;
            let name =  items[i].name;
            let packSize =  items[i].packSize;
            let price =  items[i].price;
            let quantity =  items[i].qty;

            if(search == code){

                $("#ICode").text(code);
                $("#inputIName").val(name);
                $("#inputIPacketSize").val(packSize);
                $("#inputIPrice").val(price);
                $("#inputIQuantity").val(quantity);

            }

            if(search == name){

                $("#ICode").text(code);
                $("#inputIName").val(name);
                $("#inputIPacketSize").val(packSize);
                $("#inputIPrice").val(price);
                $("#inputIQuantity").val(quantity);
            }
        }

    });


</script>
</body>

</html>